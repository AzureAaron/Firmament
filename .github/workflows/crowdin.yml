name: Crowdin Action
on:
    push:
        branches:
            - master

jobs:
    synchronize-with-crowdin:
        runs-on: ubuntu-latest
        permissions:
            pull-requests: write
            contents: write
        steps:
            -   name: Checkout
                uses: actions/checkout@v3
            -   name: Crowdin Action
                uses: crowdin/github-action@v1
                with:
                    upload_sources: true
                    config: crowdin.yml
                    upload_translations: false
                    download_sources: false
                    download_translations: true
                    skip_untranslated_strings: true
                    export_only_approved: true
                    push_translations: true
                    create_pull_request: true
                    pull_request_title: 'New Crowdin Translations'
                    pull_request_base_branch_name: 'master'
                    pull_request_body: 'New Crowdin Translations'
                    localization_branch_name: l10n
                env:
                    GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
                    CROWDIN_PERSONAL_TOKEN: "${{ secrets.CROWDIN_TOKEN }}"
